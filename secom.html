<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠˆí¼ ë³´ì•ˆ ì‹œìŠ¤í…œ - ë§ˆìŠ¤í„° ê°€ë“œ</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --panel-color: #2c3e50;
            --lcd-bg: #222;
            --lcd-text: #00ff41;
            --lcd-alarm: #ff3e3e;
            --btn-action: #3498db;
            --btn-security: #e74c3c;
            --btn-disarm: #f39c12;
            --btn-number: #ecf0f1;
            --accent: #f1c40f;
        }

        body {
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
            overflow: hidden;
            user-select: none;
        }

        .security-device {
            background-color: var(--panel-color);
            width: 380px;
            padding: 25px;
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5), inset 0 2px 5px rgba(255,255,255,0.2);
            border: 4px solid #34495e;
            text-align: center;
            position: relative;
        }

        /* LCD í™”ë©´ */
        .lcd-screen {
            background-color: var(--lcd-bg);
            height: 110px;
            border-radius: 10px;
            margin-bottom: 20px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 3px solid #111;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        /* ì‹œìŠ¤í…œ ì ê¸ˆ ë ˆì´ì–´ */
        #lock-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none; /* ê¸°ë³¸ì€ ìˆ¨ê¹€ */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            color: var(--accent);
            border-radius: 7px;
        }

        .lock-icon { font-size: 50px; margin-bottom: 5px; animation: bounce 1s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

        /* ê²½ë¹„ ì¤‘ ì• ë‹ˆë©”ì´ì…˜ */
        .lcd-screen.alarm-mode { background-color: #400; box-shadow: inset 0 0 20px #f00; border-color: #f00; }

        #status-text { color: var(--lcd-text); font-size: 1.2rem; font-weight: bold; margin-bottom: 5px; }
        #input-display { color: var(--accent); font-size: 1.6rem; letter-spacing: 5px; height: 1.6rem; font-family: 'Courier New', monospace; }

        /* ì»¨íŠ¸ë¡¤ êµ¬ì—­ */
        .controls { display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 20px; }

        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .btn-num {
            background: var(--btn-number); border: none; padding: 15px; font-size: 1.2rem;
            font-weight: bold; border-radius: 10px; cursor: pointer; box-shadow: 0 4px #bdc3c7;
        }
        .btn-num:active { box-shadow: 0 0px #bdc3c7; transform: translateY(4px); }

        .action-buttons { display: flex; flex-direction: column; gap: 8px; }
        .btn-act {
            padding: 12px 5px; border: none; border-radius: 8px; color: white;
            font-weight: bold; cursor: pointer; box-shadow: 0 4px rgba(0,0,0,0.3); font-size: 0.9rem;
        }
        .btn-act.blue { background-color: var(--btn-action); }
        .btn-act.red { background-color: var(--btn-security); }
        .btn-act.orange { background-color: var(--btn-disarm); }
        .btn-act:disabled { background-color: #555; cursor: not-allowed; box-shadow: none; }

        /* ì§€ë¬¸ ì¸ì‹ê¸° */
        .fingerprint-section {
            background: #222; padding: 20px; border-radius: 20px; border: 2px solid #444;
            cursor: pointer; position: relative; overflow: hidden;
        }
        .finger-icon { font-size: 50px; color: #555; transition: 0.3s; }
        .scanning-light {
            position: absolute; top: -100%; left: 0; width: 100%; height: 100%;
            background: linear-gradient(transparent, rgba(52, 152, 219, 0.5), transparent); display: none;
        }
        .active-scan .scanning-light { display: block; animation: scan 1.2s infinite; }
        @keyframes scan { 0% { top: -100%; } 100% { top: 100%; } }
        .active-scan .finger-icon { color: var(--btn-action); text-shadow: 0 0 15px var(--btn-action); }

    </style>
</head>
<body>

<div class="security-device">
    <!-- LCD í™”ë©´ êµ¬ì—­ -->
    <div class="lcd-screen" id="lcd">
        <!-- ì ê¸ˆ ì‹œ ë‚˜íƒ€ë‚  ì˜¤ë²„ë ˆì´ -->
        <div id="lock-overlay">
            <div class="lock-icon">ğŸ”’</div>
            <div style="font-weight: bold; font-size: 0.9rem;">SYSTEM LOCKED</div>
        </div>
        
        <div id="status-text">ì‹œìŠ¤í…œ ëŒ€ê¸° ì¤‘...</div>
        <div id="input-display"></div>
    </div>

    <!-- ì¡°ì‘ë¶€ -->
    <div class="controls">
        <div class="keypad">
            <button class="btn-num" onclick="pressKey('1')">1</button>
            <button class="btn-num" onclick="pressKey('2')">2</button>
            <button class="btn-num" onclick="pressKey('3')">3</button>
            <button class="btn-num" onclick="pressKey('4')">4</button>
            <button class="btn-num" onclick="pressKey('5')">5</button>
            <button class="btn-num" onclick="pressKey('6')">6</button>
            <button class="btn-num" onclick="pressKey('7')">7</button>
            <button class="btn-num" onclick="pressKey('8')">8</button>
            <button class="btn-num" onclick="pressKey('9')">9</button>
            <button class="btn-num" onclick="clearInput()" style="background:#e67e22; color:white;">C</button>
            <button class="btn-num" onclick="pressKey('0')">0</button>
            <button class="btn-num" onclick="pressKey('#')">#</button>
        </div>

        <div class="action-buttons">
            <button class="btn-act blue action-btn" onclick="prepareAction('ì¶œê·¼')">ì¶œê·¼</button>
            <button class="btn-act blue action-btn" onclick="prepareAction('í‡´ê·¼')">í‡´ê·¼</button>
            <button class="btn-act blue action-btn" onclick="prepareAction('ì™¸ì¶œ')">ì™¸ì¶œ</button>
            <button class="btn-act red action-btn" onclick="prepareAction('ê²½ë¹„')">ê²½ë¹„</button>
            <button class="btn-act orange action-btn" onclick="prepareAction('í•´ì œ')">í•´ì œ</button>
        </div>
    </div>

    <!-- ì§€ë¬¸ ì¸ì‹ê¸° -->
    <div class="fingerprint-section" id="scanner" onclick="scanFingerprint()">
        <div class="scanning-light"></div>
        <div class="finger-icon">â˜</div>
        <div style="color: #888; font-size: 0.7rem; margin-top: 5px;">ì§€ë¬¸ ì¸ì‹ ì„¼ì„œ</div>
    </div>
</div>

<script>
    let currentInput = "";
    let pendingAction = "";
    let isArmed = false; 
    let isLocked = false; // ì‹œìŠ¤í…œ ì ê¸ˆ ìƒíƒœ ë³€ìˆ˜

    const statusText = document.getElementById('status-text');
    const inputDisplay = document.getElementById('input-display');
    const scanner = document.getElementById('scanner');
    const lcd = document.getElementById('lcd');
    const lockOverlay = document.getElementById('lock-overlay');
    const actionBtns = document.querySelectorAll('.action-btn');

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playBeep(freq = 880, dur = 0.1, type = 'square') {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = type;
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.start(); osc.stop(audioCtx.currentTime + dur);
    }

    function pressKey(num) {
        if (num === '#') {
            checkPassword();
            return;
        }
        
        playBeep(1000, 0.05);
        if (currentInput.length < 8) {
            currentInput += num;
            inputDisplay.innerText = currentInput;
        }
    }

    function checkPassword() {
        if (currentInput === '112') {
            toggleLock();
        } else {
            playBeep(200, 0.3, 'sawtooth');
            speak("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
            clearInput();
        }
    }

    function toggleLock() {
        isLocked = !isLocked;
        clearInput();

        if (isLocked) {
            // ì ê¸ˆ ëª¨ë“œ ì§„ì…
            playBeep(400, 0.5, 'sine');
            setTimeout(() => playBeep(300, 0.5, 'sine'), 200);
            lockOverlay.style.display = 'flex';
            actionBtns.forEach(btn => btn.disabled = true);
            speak("ì‹œìŠ¤í…œì„ ì ê¸‰ë‹ˆë‹¤. ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        } else {
            // ì ê¸ˆ í•´ì œ
            playBeep(800, 0.1);
            setTimeout(() => playBeep(1200, 0.2), 100);
            lockOverlay.style.display = 'none';
            actionBtns.forEach(btn => btn.disabled = false);
            speak("ì‹œìŠ¤í…œ ì ê¸ˆì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤. í™˜ì˜í•©ë‹ˆë‹¤.");
        }
    }

    function clearInput() {
        playBeep(400, 0.1);
        currentInput = "";
        inputDisplay.innerText = "";
    }

    function prepareAction(action) {
        if (isLocked) return; // ì ê¸ˆ ìƒíƒœë©´ ë¬´ì‹œ

        if (isArmed && action !== 'í•´ì œ') {
            playBeep(200, 0.3);
            statusText.innerText = "ê²½ë¹„ í•´ì œ í•„ìš”!";
            speak("ê²½ë¹„ ëª¨ë“œì…ë‹ˆë‹¤. ë¨¼ì € í•´ì œí•˜ì„¸ìš”.");
            return;
        }

        playBeep(1200, 0.1);
        pendingAction = action;
        statusText.innerText = "ì§€ë¬¸ ì¸ì‹ ëŒ€ê¸°...";
        scanner.classList.add('active-scan');
    }

    function scanFingerprint() {
        if (isLocked || !pendingAction) {
            if (!isLocked) playBeep(300, 0.2);
            return;
        }

        playBeep(1500, 0.1);
        setTimeout(() => playBeep(2000, 0.1), 100);

        let msg = "";
        if (pendingAction === 'ê²½ë¹„') {
            isArmed = true;
            msg = "ê²½ë¹„ ì‹œìŠ¤í…œ ê°€ë™. ë¬´ë‹¨ ì¹¨ì…ì„ ê°ì‹œí•©ë‹ˆë‹¤.";
            lcd.classList.add('alarm-mode');
            statusText.innerText = "ê²½ë¹„ ì¤‘ - ì ‘ê·¼ ê¸ˆì§€";
        } else if (pendingAction === 'í•´ì œ') {
            isArmed = false;
            msg = "ê²½ë¹„ê°€ ì„±ê³µì ìœ¼ë¡œ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.";
            lcd.classList.remove('alarm-mode');
            statusText.innerText = "ê²½ë¹„ í•´ì œ ì™„ë£Œ";
        } else {
            msg = `${pendingAction} ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`;
            statusText.innerText = msg;
        }

        speak(msg);
        finishProcess();
    }

    function finishProcess() {
        scanner.classList.remove('active-scan');
        pendingAction = "";
        currentInput = "";
        inputDisplay.innerText = "";
        setTimeout(() => {
            if (!isLocked) {
                statusText.innerText = isArmed ? "ê²½ë¹„ ì¤‘ - ì ‘ê·¼ ê¸ˆì§€" : "ì‹œìŠ¤í…œ ëŒ€ê¸° ì¤‘...";
            }
        }, 3000);
    }

    function speak(text) {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'ko-KR';
        utterance.rate = 1.1;
        window.speechSynthesis.speak(utterance);
    }
</script>

</body>
</html>
